"use strict";var _require=require("lodash"),isObject=_require.isObject,isArray=_require.isArray;function addToArray(r,e,i){return i&&2===i.priority?r.unshift(e):r.push(e)}function isPlugin(r){return"String"!==r.constructor.name&&"Object"!==r.constructor.name}function getPluginName(r){return r.constructor.name}var wordsToKeep={use:"loader",rules:"test"};function mergeArr(f,r,l,d){r.forEach(function(e){if(wordsToKeep[l]&&isObject(e)){var r=f.find(function(r){return r[wordsToKeep[l]].toString()===e[wordsToKeep[l]].toString()});r?deepMergeObj(r,e,d):addToArray(f,e,d)}else{if("string"==typeof e)f.find(function(r){return r===e})||addToArray(f,e,d);else if(isPlugin(e)){if(isPlugin(e)){var i=f.find(function(r){return isPlugin(r)&&getPluginName(r)===getPluginName(e)});if(i){var n=Object.keys(e).filter(function(r){return isNaN(Number(r))}),t=!0,o=!1,u=void 0;try{for(var a,s=n[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var c=a.value;shallowMergeObj(i,e,c,d)}}catch(r){o=!0,u=r}finally{try{!t&&s.return&&s.return()}finally{if(o)throw u}}}else addToArray(f,e,d)}}else addToArray(f,e,d)}})}function deepMergeObj(r,e,i){for(var n in e)shallowMergeObj(r,e,n,i)}function shallowMergeObj(r,e,i,n){r[i]?isArray(r[i])&&isArray(e[i])?mergeArr(r[i],e[i],i,n):isObject(r[i])&&isObject(e[i])&&deepMergeObj(r[i],e[i],n):r[i]=e[i]}function merge(r,e,i){return deepMergeObj(r,e,i),r}module.exports=merge;